<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Status and Error Codes - Weather API Documentation</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <div class="header">
        <h1>Status and Error Codes</h1>
        <p class="subtitle">Complete guide to status codes, error responses, and troubleshooting</p>
    </div>

    <div class="container">
        <div class="back-nav">
            <a href="../index.html">← Back to Documentation Home</a>
        </div>

        <p class="intro-text">Every Weather API request returns an HTTP status code in the response header. These codes indicate whether the request was successful or if an error occurred.</p>

        <h2>Common HTTP Status Codes</h2>
        
        <table class="reference-table">
            <thead>
                <tr>
                    <th>Code</th>
                    <th>Text</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><span style="font-family: 'Roboto Mono', monospace; font-weight: bold; color: #34a853;">200</span></td>
                    <td>OK</td>
                    <td>Successful request and response.</td>
                </tr>
                <tr>
                    <td><span style="font-family: 'Roboto Mono', monospace; font-weight: bold; color: #ea4335;">400</span></td>
                    <td>Bad Request</td>
                    <td>Malformed parameters or other invalid input.</td>
                </tr>
                <tr>
                    <td><span style="font-family: 'Roboto Mono', monospace; font-weight: bold; color: #ea4335;">401</span></td>
                    <td>Unauthorized</td>
                    <td>Missing or invalid API key.</td>
                </tr>
                <tr>
                    <td><span style="font-family: 'Roboto Mono', monospace; font-weight: bold; color: #ea4335;">403</span></td>
                    <td>Forbidden</td>
                    <td>You don't have permission to access this resource.</td>
                </tr>
                <tr>
                    <td><span style="font-family: 'Roboto Mono', monospace; font-weight: bold; color: #ea4335;">404</span></td>
                    <td>Not Found</td>
                    <td>The requested resource doesn't exist.</td>
                </tr>
                <tr>
                    <td><span style="font-family: 'Roboto Mono', monospace; font-weight: bold; color: #ea4335;">429</span></td>
                    <td>Too Many Requests</td>
                    <td>You have exceeded your rate limit.</td>
                </tr>
                <tr>
                    <td><span style="font-family: 'Roboto Mono', monospace; font-weight: bold; color: #ea4335;">500</span></td>
                    <td>Internal Server Error</td>
                    <td>A problem occurred on the server. Retry later.</td>
                </tr>
            </tbody>
        </table>

        <h2>Viewing Status Codes</h2>

        <p>To view status codes in the response header, add the <code>-i</code> option to your <code>curl</code> command:</p>

        <div class="code-block" data-language="bash">curl -i -X GET "https://api.openweathermap.org/data/2.5/weather?zip=95050&appid=$API_KEY&units=imperial"</div>

        <div class="response-example">
            <h4>Example response header</h4>
            <div class="code-block" data-language="http">HTTP/1.1 200 OK
Server: openresty
Date: Thu, 06 Dec 2018 22:58:41 GMT
Content-Type: application/json; charset=utf-8
Content-Length: 446
Connection: keep-alive</div>
        </div>

        <h2>Error Response Format</h2>

        <p>When an error occurs, the response body is JSON with an <code>error</code> object:</p>

        <div class="error-example">
            <h4>Example error response</h4>
            <div class="code-block" data-language="json">{
  "cod": 401,
  "message": "Invalid API key. Please see http://openweathermap.org/faq#error401"
}</div>
        </div>

        <h2>Troubleshooting Tips</h2>

        <ul class="simple-list">
            <li><span style="font-weight: 600; color: #202124; font-family: 'Roboto Mono', monospace;">401 Unauthorized</span> → Check that you included a valid API key.</li>
            <li><span style="font-weight: 600; color: #202124; font-family: 'Roboto Mono', monospace;">400 Bad Request</span> → Verify that all required parameters are present and correctly formatted.</li>
            <li><span style="font-weight: 600; color: #202124; font-family: 'Roboto Mono', monospace;">404 Not Found</span> → Double-check the endpoint and query parameters.</li>
            <li><span style="font-weight: 600; color: #202124; font-family: 'Roboto Mono', monospace;">429 Too Many Requests</span> → See <a href="rate-limits.html">Rate Limiting</a>.</li>
            <li><span style="font-weight: 600; color: #202124; font-family: 'Roboto Mono', monospace;">500 Internal Error</span> → Retry after a short delay. If the problem persists, check <a href="https://status.openweathermap.org/">OpenWeather status page</a>.</li>
        </ul>

        <h2>Next Steps</h2>

        <p>Learn about <a href="rate-limits.html">Rate Limiting and Thresholds</a> to avoid hitting 429 errors.</p>
    </div>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Add copy buttons to all code blocks
        const codeBlocks = document.querySelectorAll('.code-block');
        
        codeBlocks.forEach(block => {
            const button = document.createElement('button');
            button.className = 'copy-button';
            button.textContent = 'Copy';
            button.onclick = function() {
                const text = block.textContent || block.innerText;
                navigator.clipboard.writeText(text).then(() => {
                    button.textContent = 'Copied!';
                    button.classList.add('copied');
                    setTimeout(() => {
                        button.textContent = 'Copy';
                        button.classList.remove('copied');
                    }, 2000);
                });
            };
            block.appendChild(button);
        });
    });
    </script>
</body>
</html>